{% extends 'base.html' %}
{% load bootstrap4 %}

{% block content %}
<div class='m-5'>
    <h2>Post Detail</h2>
    <h5>{{ post.title }}</h5>
    <p>{{ post.content }}</p>
    {% include 'posts/_like.html' %}
    {% if post.user == request.user %}
        <a href="{% url 'posts:post_update' post.pk %}"><button class="btn btn-info">수정</button></a>
        <form action="{% url 'posts:post_delete' post.pk %}" method="POST" class="d-inline">
            {% csrf_token %}
            <button class="btn btn-danger">삭제</button>
        </form>
    {% endif %}
    <hr>
    <h5>Comments</h5>
    <div class="list-group">
        {% for comment in post.comment_set.all %}
            <a href="#" class="list-group-item list-group-item-action">{{ comment.user.username }} : {{ comment.content }}
            {% if comment.user == request.user %}
            <form action="{% url 'posts:comments_delete' post.pk comment.pk %}" method="POST">
                {% csrf_token %}
                <button class="mt-3 btn btn-danger">Delete</button>
            </form>
            </a>
            {% endif %}
        {% endfor %}
    </div>
    <hr>
    <form action="{% url 'posts:comments' post.pk %}" method="POST">
        {% csrf_token %}
        {% bootstrap_form form %}
        <button class="btn btn-primary">Write</button>
    </form>
    <hr>
</div>
{% endblock %}
